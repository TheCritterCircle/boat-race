{"version":3,"sources":["component.js","game.js","gameObject.js","hud.js","room.js","uiMap.js","util.js","components/physicsBody.js","gameobjects/cannonBall.js","gameobjects/coin.js","gameobjects/player.js","maps/minimap.js","maps/pointermap.js"],"names":["Component","[object Object]","gameObject","this","worldX","worldY","Game","i","w","h","stage","createjs","Stage","canvas","width","height","Ticker","setFPS","addEventListener","update","bind","room","Room","addChild","hud","HUD","shipInfo","window","onkeydown","inputDown","onkeyup","inputUp","on","mouseMove","a","socket","emit","ip","io","console","log","e","innerWidth","innerHeight","player","mode","setCrosshairPos","stageX","stageY","getCrosshairPos","keyCode","moving","up","left","down","right","x","y","GameObject","Container","game","super","parent","removeChild","starting","text","Text","outline","minimap","Minimap","pointermap","Pointermap","background","Bitmap","size","screen","getSize","startY","ships","action","ret","Object","values","forEach","ship","playerPos","getPos","minY","minW","visible","undefined","destroy","name","addShip","m","updateCrumb","c","s","Player","cannon","captain","UIMap","nodes","color","p","scale","scaleX","scaleY","node","createNodeShape","removeAllChildren","map","getCrumb","mapPlayer","newNode","sizeLocal","Shape","graphics","beginFill","drawCircle","ZERO_VECTOR","DEBUG","oldLog","lerpXY","b","t","generateCoins","n","bounds","pos","push","Math","random","centerText","getBounds","data","PhysicsBody","velocity","dampening","CannonBall","Coin","coinGraphic","speed","shipGraphic","captainNickname","crosshair","crosshairGraphic","cannonNickname","physics","addImpulse","mouseX","mouseY","mouse","globalToLocal","localToGlobal","all","setPos","box","drawRect","setChildIndex","setScale","flip","sign","triangle","drawPolyStar","textContent"],"mappings":"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","file":"src/game.min.js","sourcesContent":["class Component {\r\n\tconstructor(gameObject) {\r\n\t\tthis.gameObject = { worldX: 0, worldY: 0 };\r\n\t\tgameObject && (this.gameObject = gameObject);\r\n\t}\r\n}","class Game {\r\n\tconstructor(i, w, h) {\r\n\t\t//Setup Stage\r\n\t\tthis.stage = new createjs.Stage(i);\r\n\t\tthis.stage.canvas.width = w;\r\n\t\tthis.stage.canvas.height = h;\r\n\t\t//this.stage.canvas.style.cursor = \"none\";\r\n\r\n\t\t//Setup Game Loop\r\n\t\tcreatejs.Ticker.setFPS(60);\r\n\t\tcreatejs.Ticker.addEventListener(\"tick\", this.update.bind(this));\r\n\r\n\t\t//Setup Game Objects\r\n\t\tthis.room = new Room(this);\r\n\t\tthis.stage.addChild(this.room);\r\n\t\tthis.hud = new HUD(this);\r\n\t\tthis.stage.addChild(this.hud);\r\n\r\n\t\t//Attributes\r\n\t\tthis.shipInfo = {};\r\n\r\n\t\t//Setup Events\r\n\t\twindow.onkeydown = this.inputDown.bind(this);\r\n\t\twindow.onkeyup = this.inputUp.bind(this);\r\n\t\tthis.stage.on(\"stagemousemove\", this.mouseMove.bind(this));\r\n\t}\r\n\r\n\tgetSize() {\r\n\t\treturn {\r\n\t\t\tw:this.stage.canvas.width,\r\n\t\t\th:this.stage.canvas.height\r\n\t\t}\r\n\t}\r\n\r\n\t//Socket Utils\r\n\temit(...a) {\r\n\t\tthis.socket&&(this.socket.emit(...a));\r\n\t}\r\n\r\n\ton(...a) {\r\n\t\tthis.socket&&(this.socket.on(...a))\r\n\t}\r\n\r\n\r\n\tjoin(ip) {\r\n\t\tvar socket = io(ip);\r\n\t\tthis.socket = socket;\r\n\t\t//connect\r\n\t\tsocket.on('connect',function(){\r\n\t\t\tconsole.log(\"Connected to server\")\r\n\t\t});\r\n\t\t//joinShip\r\n\t\tvar room = this.room;\r\n\t\troom.bind('joinShip');\r\n\t\troom.bind('addShip');\r\n\t\troom.bind('removeShip');\r\n\t\tsocket.on('pending',room.bind('reset',true));\r\n\t\troom.bind('raceStart');\r\n\t\troom.bind('moveShip');\r\n\t\troom.bind('moveCrosshair');\r\n\t}\r\n\r\n\r\n\t//events\r\n\tupdate(e) {\r\n\t\tthis.stage.canvas.width = window.innerWidth;\r\n\t\tthis.stage.canvas.height = window.innerHeight\r\n\t\tthis.player&&this.room.update();\r\n\t\tthis.hud.update();\r\n\t\tthis.stage.update();\r\n\t}\r\n\r\n\tmouseMove(e) {\r\n\t\tif (!this.player||(this.player.mode != 1&&this.player.mode != -1)) return;\r\n\t\t//this.player.setCrosshairPos(e.stageX-game.getSize().w/2, e.stageY-game.getSize().h/2);\r\n\r\n\t\tthis.player.setCrosshairPos(e.stageX, e.stageY);\r\n\t\tthis.emit(\"moveCrosshair\",this.player.getCrosshairPos());\r\n\t}\r\n\r\n\tinputDown(e) {\r\n\t\tif (!this.player||(this.player.mode != 0&&this.player.mode !=-1)) return;\r\n\t\tconsole.log(\"INPUT: \" + e.keyCode)\r\n\t\tswitch (e.keyCode) {\r\n\t\t\t// Up (-X)\r\n\t\t\tcase 38: // UP ARROW\r\n\t\t\tcase 87: // W\r\n\t\t\t\tthis.player.moving.up = 1;\r\n\t\t\t\tbreak;\r\n\t\t\t// Left (-Y)\r\n\t\t\tcase 37: // Left Arrow\r\n\t\t\tcase 65: // A\r\n\t\t\t\tthis.player.moving.left = 1;\r\n\t\t\t\tbreak;\r\n\t\t\t// Down (+Y)\r\n\t\t\tcase 40: // Down Arrow\r\n\t\t\tcase 83: // S\r\n\t\t\t\tthis.player.moving.down = 1;\r\n\t\t\t\tbreak;\r\n\t\t\t// Right (+X)\r\n\t\t\tcase 39: // Right Arrow\r\n\t\t\tcase 68: // D\r\n\t\t\t\tthis.player.moving.right = 1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tvar {up,down,left,right} = this.player.moving;\r\n\t\tif(!(up==0&&down==0&&left==0&&right==0)) this.emit(\"moveShip\",{x:this.player.worldX,y:this.player.worldY,moving:this.player.moving});\r\n\t}\r\n\r\n\tinputUp(e) {\r\n\t\tif(!this.player) return\r\n\t\tconsole.log(\"INPUT: \" + e.keyCode)\r\n\t\tswitch (e.keyCode) {\r\n\t\t\t// Up (-X)\r\n\t\t\tcase 38: // UP ARROW\r\n\t\t\tcase 87: // W\r\n\t\t\t\tthis.player.moving.up = 0;\r\n\t\t\t\tthis.emit(\"moveShip\",{x:this.player.x,y:this.player.y,moving:this.player.moving});\r\n\t\t\t\tbreak;\r\n\t\t\t// Left (-Y)\r\n\t\t\tcase 37: // Left Arrow\r\n\t\t\tcase 65: // A\r\n\t\t\t\tthis.player.moving.left = 0;\r\n\t\t\t\tthis.emit(\"moveShip\",{x:this.player.x,y:this.player.y,moving:this.player.moving});\r\n\t\t\t\tbreak;\r\n\t\t\t// Down (+Y)\r\n\t\t\tcase 40: // Down Arrow\r\n\t\t\tcase 83: // S\r\n\t\t\t\tthis.player.moving.down = 0;\r\n\t\t\t\tthis.emit(\"moveShip\",{x:this.player.x,y:this.player.y,moving:this.player.moving});\r\n\t\t\t\tbreak;\r\n\t\t\t// Right (+X)\r\n\t\t\tcase 39: // Right Arrow\r\n\t\t\tcase 68: // D\r\n\t\t\t\tthis.player.moving.right = 0;\r\n\t\t\t\tthis.emit(\"moveShip\",{x:this.player.x,y:this.player.y,moving:this.player.moving});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n","class GameObject extends createjs.Container {\r\n\tconstructor(game, x=0, y=0) {\r\n\t\tsuper();\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tupdate() {}\r\n\r\n\tsetPos(x, y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tgetPos() {\r\n\t\treturn{x:this.x,y:this.y}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.parent.removeChild(this);\r\n\t}\r\n}\r\n","class HUD extends createjs.Container {\r\n\tconstructor(game) {\r\n\t\tsuper();\r\n\t\tthis.starting = new createjs.Container();\r\n\t\tthis.addChild(this.starting);\r\n\t\tthis.text = new createjs.Text(\"Waiting for 1 more player\", \"bold 50px Arial\", \"#ffffff\");\r\n\t\tthis.starting.addChild(this.text);\r\n\t\tthis.outline = new createjs.Text(\"Waiting for 1 more player\", \"bold 50px Arial\", \"#000\");\r\n\t\tthis.starting.addChild(this.outline);\r\n\t\tthis.outline.outline = 3\r\n\r\n\t\tthis.minimap = new Minimap(game);\r\n\t\tthis.addChild(this.minimap);\r\n\r\n\t\tthis.pointermap = new Pointermap(game);\r\n\t\tthis.addChild(this.pointermap);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.minimap.update();\r\n\t\tthis.pointermap.update();\r\n\t}\r\n}","class Room extends createjs.Container {\r\n\tconstructor(game) {\r\n\t\tsuper();\r\n\t\tthis.background = new createjs.Bitmap(\"media/background.png\");\r\n\t\tthis.addChild(this.background);\r\n\r\n\t\t//Properies\r\n\t\tthis.size = {w:1920,h:5550};\r\n\t\tvar screen = game.getSize();\r\n\t\tthis.startY = this.size.h-screen.h/2;\r\n\t\tthis.ships = {}\r\n\t}\r\n\r\n\tbind(action,ret) {\r\n\t\tif(ret) {\r\n\t\t\treturn this[action].bind(this);\r\n\t\t}\r\n\t\tgame.on(action,this[action].bind(this));\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tObject.values(this.ships).forEach(ship => { ship.update() })\r\n\r\n\t\tvar screen = game.getSize();\r\n\t\tvar playerPos = game.player.getPos();\r\n\t\tthis.x = screen.w/2-playerPos.x;\r\n\t\tthis.y = screen.h/2-playerPos.y;\r\n\r\n\t\tvar minY = screen.h-this.size.h;\r\n\t\tvar minW = screen.w-this.size.w;\r\n\t\tif(this.y<minY) {\r\n\t\t\tthis.y = minY;\r\n\t\t} else if(this.y>0) {\r\n\t\t\tthis.y = 0;\r\n\t\t}\r\n\t\tif(this.x<minW) {\r\n\t\t\tthis.x = minW;\r\n\t\t} else if(this.x>-minW) {\r\n\t\t\tthis.x = -minW;\r\n\t\t}\r\n\t}\r\n\r\n\treset() {\r\n\t\tgame.hud.starting.visible = true;\r\n\t\tconsole.log(\"We be finding you a crew...\")\r\n\t\tthis.player = undefined;\r\n\t\tObject.values(this.ships).forEach(ship=>{ship.destroy()});\r\n\t\tthis.ships = {};\r\n\t\tthis.shipInfo = {};\r\n\t}\r\n\r\n\tjoinShip(shipInfo) {\r\n\t\tgame.hud.starting.visible = false\r\n\t\tconsole.log(\"joinShip\",shipInfo);\r\n\t\tconsole.log(\"You are the\",(shipInfo.mode==0?\"Captain\":\"Cannon\") + \"!\")\r\n\t\tgame.shipInfo.name = shipInfo.name;\r\n\t\tgame.shipInfo.mode = shipInfo.mode;\r\n\r\n\t\tfor(var i in shipInfo.ships) {\r\n\t\t\tthis.addShip(shipInfo.ships[i])\r\n\t\t}\r\n\t}\r\n\r\n\tmoveShip(m) {\r\n\t\tconsole.log(\"moveShip\",m);\r\n\t\tif(m.name == game.player.name&&game.player.mode ==0) return;\r\n\t\tthis.ships[m.name].updateCrumb(m);\r\n\t}\r\n\r\n\traceStart() {\r\n\t\tconsole.log(\"Race Start\");\r\n\r\n\t}\r\n\r\n\tmoveCrosshair(c) {\r\n\t\tconsole.log(\"moveCrosshair\",c);\r\n\t\tthis.ships[c.name].updateCrumb(c);\r\n\t}\r\n\r\n\taddShip(s) {\r\n\t\tif(this.ships[s.name]) return;\r\n\t\tconsole.log(\"addShip\",s);\r\n\t\tvar ship = new Player(this, s.name);\r\n\t\tship.updateCrumb(s);\r\n\t\tthis.ships[ship.name] = ship;\r\n\t\tif(ship.name == game.shipInfo.name) {\r\n\t\t\tship.mode = game.shipInfo.mode;\r\n\t\t\tconsole.log(game.shipInfo.mode==0?(ship.cannon + \": Aye Aye Captain!\"):(ship.captain + \": Ahoy Mateys!\"))\r\n\t\t\tgame.player=ship;\r\n\t\t}\r\n\t\tthis.addChild(ship);\r\n\t}\r\n\r\n\tremoveShip(s) {\r\n\t\tconsole.log(\"removeShip\",s);\r\n\t\tif(!this.ships[s.name]) return;\r\n\t\tthis.ships[s.name].destroy();\r\n\t\tdelete this.ships[s.name];\r\n\t}\r\n}","class UIMap extends createjs.Container {\r\n\tconstructor(game) {\r\n\t\tsuper();\r\n\t\tthis.nodes = new createjs.Container();\r\n\t\tthis.addChild(this.nodes);\r\n\t}\r\n\r\n\tnewNode(x,y,color,size,...p) {\r\n\t\tvar scale = 2/(this.scaleX + this.scaleY)\r\n\t\tvar node = this.createNodeShape(size*scale,color)\r\n\t\tthis.nodes.addChild(node);\r\n\t\tnode.x = x;\r\n\t\tnode.y = y;\r\n\t}\r\n\r\n\r\n\tsetScale(scale) {\r\n\t\tthis.scaleX = scale*game.getSize().h/game.room.size.h;\r\n\t\tthis.scaleY = scale*game.getSize().h/game.room.size.h;\r\n\t}\r\n\r\n\tsetPos(x,y) {\r\n\t\tthis.x = x*(game.getSize().w-this.scaleX*game.room.size.w);\r\n\t\tthis.y = y*(game.getSize().h-this.scaleY*game.room.size.h);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.nodes.removeAllChildren();\r\n\t\tvar ships = Object.values(game.room.ships).map(ship=>ship.getCrumb(true))\r\n\t\tships.forEach(ship=>{\r\n\t\t\tthis.mapPlayer(ship)\r\n\t\t});\r\n\t}\r\n\t\r\n\tmapPlayer(player) {\r\n\t\tthis.newNode(player.x,player.y,\"black\");\r\n\t}\r\n\r\n\tcreateNodeShape(sizeLocal,color,...p) {\r\n\t\tvar node = new createjs.Shape();\r\n\t\tnode.graphics.beginFill(color).drawCircle(0, 0, sizeLocal);\r\n\t\treturn node;\r\n\t}\r\n}","const\r\n\tZERO_VECTOR = { x: 0, y: 0 }\r\nDEBUG = true\r\n{\r\n\tvar oldLog = console.log;\r\n\tconsole.log = (...data) => {\r\n\t\tif (DEBUG) oldLog(...data);\r\n\t}\r\n}\r\n\r\nfunction lerpXY(a, b, t) {\r\n\treturn {\r\n\t\tx: a.x + t * (b.x - a.x),\r\n\t\ty: a.y + t * (b.y - a.y)\r\n\t}\r\n}\r\n\r\nfunction generateCoins(n, bounds) {\r\n\tvar pos = [];\r\n\tfor (let i = 0; i < n; i++) {\r\n\t\tpos.push(Math.random() * bounds.x);\r\n\t\tpos.push(Math.random() * bounds.y);\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nfunction centerText (text) {\r\nvar b = text.getBounds();\r\n\ttext.x += - (b.width/2); \r\n}\r\n","class PhysicsBody extends Component {\r\n\tconstructor(gameObject) {\r\n\t\tsuper(gameObject);\r\n\t\tthis.velocity = { x: 0, y: 0 };\r\n\t\tthis.dampening = .035;\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.gameObject.x += this.velocity.x;\r\n\t\tthis.gameObject.y += this.velocity.y;\r\n\t\tthis.velocity = lerpXY(this.velocity, ZERO_VECTOR, this.dampening);\r\n\t}\r\n\taddImpulse(x, y) {\r\n\t\tthis.velocity.x += x;\r\n\t\tthis.velocity.y += y;\r\n\t}\r\n}","class CannonBall extends GameObject {\r\n\tconstructor(game,player) {\r\n\t\tsuper(game,...Object.values(player.getPos()));\r\n\r\n\t\t\r\n\t}\r\n}","class Coin extends GameObject {\r\n\tconstructor(game, x, y) {\r\n\t\tsuper(game, x, y);\r\n\t\tthis.coinGraphic = new createjs.Shape();\r\n\t\tthis.coinGraphic.graphics.beginFill(\"Yellow\").drawCircle(0, 0, 25);\r\n\t\tthis.addChild(this.coinGraphic);\r\n\t}\r\n}","class Player extends GameObject {\r\n\tconstructor(game,name,x=0,y=0) {\r\n\t\tsuper(game,x,y);\r\n\t\tthis.name = name;\r\n\t\tthis.mode = -1;\r\n\t\tthis.speed = .3\r\n\t\tthis.moving = { up: 0, down: 0, left: 0, right: 0 };\r\n\r\n\t\t//Ship\r\n\t\tthis.ship = new createjs.Container();\r\n\t\tthis.addChild(this.ship);\r\n\t\t//Graphic\r\n\t\t\tthis.shipGraphic = new createjs.Shape();\r\n\t\t\tthis.ship.addChild(this.shipGraphic);\r\n\t\t\tthis.shipGraphic.graphics.beginFill(\"DeepSkyBlue\").drawCircle(0, 0, 50);\r\n\t\t//Nickname\r\n\t\t\tthis.captainNickname = new createjs.Text(\"Captain\", \"15px Arial\", \"#000000\");\r\n\t\t\tthis.ship.addChild(this.captainNickname);\r\n\t\t\tthis.captainNickname.y = 50;\r\n\t\t\tcenterText(this.captainNickname);\r\n\r\n\t\t//Crosshair\r\n\t\tthis.crosshair = new createjs.Container();\r\n\t\tthis.addChild(this.crosshair);\r\n\t\t//Graphic\r\n\t\t\tthis.crosshairGraphic = new createjs.Shape();\r\n\t\t\tthis.crosshairGraphic.graphics.beginFill(\"Green\").drawCircle(0, 0, 20);\r\n\t\t\tthis.crosshair.addChild(this.crosshairGraphic);\r\n\t\t//Nickname\r\n\t\t\tthis.cannonNickname = new createjs.Text(\"Cannon\", \"15px Arial\", \"#000000\");\r\n\t\t\tthis.crosshair.addChild(this.cannonNickname);\r\n\t\t\tthis.cannonNickname.y = 20;\r\n\t\t\tcenterText(this.cannonNickname)\r\n\r\n\t\t// Components\r\n\t\tthis.physics = new PhysicsBody(this.ship);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.physics.addImpulse(\r\n\t\t\t(this.moving.right - this.moving.left) * this.speed,\r\n\t\t\t( this.moving.down / 2 - this.moving.up) * this.speed// - .2\r\n\t\t);\r\n\t\tif(this.mode==1||this.mode==-1)this.setCrosshairPos(game.stage.mouseX,game.stage.mouseY);\r\n\r\n\t\tthis.physics.update();\r\n\t\tthis.y += this.ship.y;\r\n\t\tthis.ship.y = 0;\r\n\t\tthis.x += this.ship.x;\r\n\t\tthis.ship.x = 0;\r\n\t}\r\n\r\n\tsetCrosshairPos(x, y) {\r\n\t\tvar mouse = this.globalToLocal(x,y);\r\n\t\tthis.crosshair.x = mouse.x;\r\n\t\tthis.crosshair.y = mouse.y;\r\n\t}\r\n\r\n\tgetCrosshairPos() {\r\n\t\treturn this.localToGlobal(this.crosshair.x,this.crosshair.y);\r\n\t}\r\n\r\n\tgetCrumb(all) {\r\n\t\tif(all) {\r\n\t\t\treturn {\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tx: this.getPos().x,\r\n\t\t\t\ty: this.getPos().y,\r\n\t\t\t\tmoving: this.moving,\r\n\t\t\t\tcrosshair: this.getCrosshairPos()\r\n\t\t\t}\r\n\t\t}\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: this.name,\r\n\t\t\t\t\tmode: this.mode,\r\n\t\t\t\t\tx: this.getPos().x,\r\n\t\t\t\t\ty: this.getPos().y,\r\n\t\t\t\t\tmoving: this.moving\r\n\t\t\t\t}\r\n\t\t\tcase 1:\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: this.name,\r\n\t\t\t\t\tmode: this.mode,\r\n\t\t\t\t\tcrosshair: this.getCrosshairPos()\r\n\t\t\t\t}\r\n\t\t\tdefault: \r\n\t\t\treturn {\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tmode: this.mode,\r\n\t\t\t\tx: this.getPos().x,\r\n\t\t\t\ty: this.getPos().y,\r\n\t\t\t\tmoving: this.moving,\r\n\t\t\t\tcrosshair: this.getCrosshairPos()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateCrumb(p) {\r\n\t\tp.mode && (this.mode = p.mode);\r\n\t\tp.name && (this.name = p.name);\r\n\t\tp.captain && (this.captainNickname.text = this.captain = p.captain)&&centerText(this.captainNickname);\r\n\t\tp.cannon && (this.cannonNickname.text = this.cannon = p.cannon)&&centerText(this.cannonNickname);\r\n\t\tp.x && p.y && this.setPos(p.x, p.y);\r\n\t\tp.moving && (this.moving = p.moving);\r\n\t\tp.crosshair && this.setCrosshairPos(p.crosshair.x,p.crosshair.y);\r\n\t}\r\n}","class Minimap extends UIMap {\r\n\tconstructor(game) {\r\n\t\tsuper(game);\r\n\t\tthis.box = new createjs.Shape();\r\n\t\tthis.addChild(this.box);\r\n\t\tthis.box.graphics.beginFill(\"rgba(222,222,222,.7)\").drawRect(0, 0, game.room.size.w,game.room.size.h);\r\n\t\tthis.setChildIndex(this.box,0);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tsuper.update();\r\n\t\tthis.setScale(.4);\r\n\t\tthis.setPos(.99,.02);\r\n\t}\r\n\r\n\tmapPlayer(player) {\r\n\t\tthis.newNode(player.x,player.y,\"magenta\",10);\r\n\t}\r\n}","class Pointermap extends UIMap {\r\n\tconstructor(game) {\r\n\t\tsuper(game);\r\n\t}\r\n\r\n\tmapPlayer(player) {\r\n\t\tvar margin = 30;\r\n\t\tvar y = player.y>game.player.y?game.room.size.h-margin:margin\r\n\t\tvar flip = Math.sign(y-game.room.size.h/2)\r\n\t\tthis.newNode(player.x,y,\"magenta\",flip*20,player.name);\r\n\t}\r\n\r\n\tcreateNodeShape(sizeLocal,color,name) {\r\n\t\tvar node = new createjs.Container();\r\n\t\tvar triangle = new createjs.Shape();\r\n\t\tnode.addChild(triangle)\r\n\t\ttriangle.graphics.beginFill(color).drawPolyStar(0, 0, sizeLocal,3,0,90);\r\n\r\n\t\tvar textContent = name||\"Player\"\r\n\t\t\r\n\t\tvar text = new createjs.Text(textContent, \"bold 20px Arial\", \"#ffffff\");\r\n\t\tnode.addChild(text);\r\n\t\tcenterText(text);\r\n\t\tvar outline = new createjs.Text(textContent, \"bold 20px Arial\", \"#000\");\r\n\t\tnode.addChild(outline);\r\n\t\tcenterText(outline);\r\n\t\toutline.outline = 1.1\r\n\t\treturn node;\r\n\t}\r\n}\r\n"]}